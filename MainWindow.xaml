<Window x:Class="StockBubble.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="气泡" 
        Width="80" 
        Height="80"
        MinWidth="50"
        MinHeight="50"
        MaxWidth="300"
        MaxHeight="300"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        ShowInTaskbar="False"
        ResizeMode="CanResizeWithGrip"
        MouseLeftButtonDown="Window_MouseLeftButtonDown"
        MouseDoubleClick="Window_MouseDoubleClick"
        MouseWheel="Window_MouseWheel"
        Loaded="Window_Loaded"
        SizeChanged="Window_SizeChanged">
    
    <Grid>
        <!-- 使用Viewbox实现内容自动缩放 -->
        <Viewbox Stretch="Uniform">
            <Grid Width="80" Height="80">
                <!-- 圆形气泡 - 毛玻璃效果 -->
                <Ellipse x:Name="BubbleBackground" 
                         Width="70" 
                         Height="70"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center">
                    <Ellipse.Fill>
                        <RadialGradientBrush>
                            <GradientStop Color="#30FFFFFF" Offset="0"/>
                            <GradientStop Color="#50F0F0F0" Offset="1"/>
                        </RadialGradientBrush>
                    </Ellipse.Fill>
                    <Ellipse.Effect>
                        <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.2" Color="#000000"/>
                    </Ellipse.Effect>
                </Ellipse>
                
                <!-- 边框圆环 -->
                <Ellipse x:Name="BubbleBorder" 
                         Width="70" 
                         Height="70"
                         StrokeThickness="2"
                         Stroke="#80FFFFFF"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"/>
                
                <!-- 价格文字 -->
                <TextBlock x:Name="PriceText"
                           Text="--"
                           FontSize="13"
                           FontWeight="SemiBold"
                           Foreground="#E0000000"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           TextAlignment="Center">
                    <TextBlock.Effect>
                        <DropShadowEffect BlurRadius="2" ShadowDepth="1" Opacity="0.3" Color="White"/>
                    </TextBlock.Effect>
                </TextBlock>
            </Grid>
        </Viewbox>
        
        <!-- 调整大小的视觉提示（右下角） -->
        <Grid x:Name="ResizeGrip" 
              Width="20" 
              Height="20" 
              HorizontalAlignment="Right" 
              VerticalAlignment="Bottom"
              Background="Transparent"
              Opacity="0"
              MouseEnter="ResizeGrip_MouseEnter"
              MouseLeave="ResizeGrip_MouseLeave">
            <Path Data="M 0,10 L 10,0 M 0,15 L 15,0 M 0,20 L 20,0" 
                  Stroke="#80000000" 
                  StrokeThickness="1"/>
        </Grid>
        
        <!-- 右键菜单 -->
        <Grid.ContextMenu>
            <ContextMenu>
                <MenuItem Header="设置代码" Click="Settings_Click"/>
                <MenuItem Header="刷新" Click="Refresh_Click"/>
                <Separator/>
                <MenuItem Header="调整大小">
                    <MenuItem Header="小 (60x60)" Click="SetSize_Small_Click"/>
                    <MenuItem Header="中 (80x80)" Click="SetSize_Medium_Click"/>
                    <MenuItem Header="大 (120x120)" Click="SetSize_Large_Click"/>
                    <MenuItem Header="超大 (160x160)" Click="SetSize_XLarge_Click"/>
                </MenuItem>
                <Separator/>
                <MenuItem Header="查看错误日志" Click="ViewLog_Click"/>
                <Separator/>
                <MenuItem Header="退出" Click="Exit_Click"/>
            </ContextMenu>
        </Grid.ContextMenu>
    </Grid>
</Window>

